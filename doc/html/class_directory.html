<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: Directory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_directory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Directory Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="directory_8h_source.html">directory.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Directory:</div>
<div class="dyncontent">
<div class="center"><img src="class_directory__coll__graph.png" border="0" usemap="#_directory_coll__map" alt="Collaboration graph"/></div>
<map name="_directory_coll__map" id="_directory_coll__map">
<area shape="rect" id="node2" href="class_directory_entry.html" title="Defines a directory entry. " alt="" coords="6,5,111,105"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a77366fc5c4d73a3c20fc060640b1258a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#a77366fc5c4d73a3c20fc060640b1258a">Directory</a> (int size)</td></tr>
<tr class="separator:a77366fc5c4d73a3c20fc060640b1258a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affbde8714685c61601421097d621341d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#affbde8714685c61601421097d621341d">~Directory</a> ()</td></tr>
<tr class="separator:affbde8714685c61601421097d621341d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36ed455b21bbd9a66ffe8ec689ff7c73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#a36ed455b21bbd9a66ffe8ec689ff7c73">FetchFrom</a> (<a class="el" href="class_open_file.html">OpenFile</a> *file)</td></tr>
<tr class="separator:a36ed455b21bbd9a66ffe8ec689ff7c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf5550df42587bbc604c71441a4d12fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#abf5550df42587bbc604c71441a4d12fc">WriteBack</a> (<a class="el" href="class_open_file.html">OpenFile</a> *file)</td></tr>
<tr class="separator:abf5550df42587bbc604c71441a4d12fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0072462a745ab1bc84e36a810ce7cc5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#aa0072462a745ab1bc84e36a810ce7cc5">Find</a> (char *name)</td></tr>
<tr class="separator:aa0072462a745ab1bc84e36a810ce7cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f17b4081a08ca0f3f661b8d951153c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#ab9f17b4081a08ca0f3f661b8d951153c">Add</a> (char *name, int newSector)</td></tr>
<tr class="separator:ab9f17b4081a08ca0f3f661b8d951153c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38cd9f677e7110bab63fb943d118e3cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#a38cd9f677e7110bab63fb943d118e3cc">Remove</a> (char *name)</td></tr>
<tr class="separator:a38cd9f677e7110bab63fb943d118e3cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2525a4455b80a1ee2648319ab257037c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#a2525a4455b80a1ee2648319ab257037c">List</a> (char *, int)</td></tr>
<tr class="separator:a2525a4455b80a1ee2648319ab257037c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40c728221c5557e4fc181c4091c6fcff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#a40c728221c5557e4fc181c4091c6fcff">Print</a> ()</td></tr>
<tr class="separator:a40c728221c5557e4fc181c4091c6fcff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c415a2870e506317333c666ec013aa5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#a2c415a2870e506317333c666ec013aa5">empty</a> ()</td></tr>
<tr class="separator:a2c415a2870e506317333c666ec013aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:abab8ff05c1dedadbaac7b44730eeb5a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#abab8ff05c1dedadbaac7b44730eeb5a4">FindIndex</a> (char *name)</td></tr>
<tr class="separator:abab8ff05c1dedadbaac7b44730eeb5a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3d30c557f3616574ff9eaeeb4163b82d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#a3d30c557f3616574ff9eaeeb4163b82d">tableSize</a></td></tr>
<tr class="separator:a3d30c557f3616574ff9eaeeb4163b82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58597cdbf161409c3469527f2169894b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_directory_entry.html">DirectoryEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_directory.html#a58597cdbf161409c3469527f2169894b">table</a></td></tr>
<tr class="separator:a58597cdbf161409c3469527f2169894b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines a UNIX-like "directory". </p>
<p>Each entry in the directory describes a file, and where to find it on disk. The directory data structure can be stored in memory, or on disk. When it is on disk, it is stored as a regular Nachos file. The constructor initializes a directory structure in memory; the FetchFrom/WriteBack operations shuffle the directory information from/to disk. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a77366fc5c4d73a3c20fc060640b1258a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77366fc5c4d73a3c20fc060640b1258a">&#9670;&nbsp;</a></span>Directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Directory::Directory </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize a directory; initially, the directory is completely empty. If the disk is being formatted, an empty directory is all we need, but otherwise, we need to call FetchFrom in order to initialize it from disk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>is the number of entries in the directory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="affbde8714685c61601421097d621341d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affbde8714685c61601421097d621341d">&#9670;&nbsp;</a></span>~Directory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Directory::~Directory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>De-allocate directory data structure. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab9f17b4081a08ca0f3f661b8d951153c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f17b4081a08ca0f3f661b8d951153c">&#9670;&nbsp;</a></span>Add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Directory::Add </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newSector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a file into the directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the file being added </td></tr>
    <tr><td class="paramname">newSector</td><td>the disk sector containing the added file's header </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR, ALREADY_IN_DIRECTORY or NOSPACE_IN_DIRECTORY. </dd></dl>

</div>
</div>
<a id="a2c415a2870e506317333c666ec013aa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c415a2870e506317333c666ec013aa5">&#9670;&nbsp;</a></span>empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Directory::empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tests if a directory is empty. </p><dl class="section return"><dt>Returns</dt><dd>true if the directory is empty. </dd></dl>

</div>
</div>
<a id="a36ed455b21bbd9a66ffe8ec689ff7c73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36ed455b21bbd9a66ffe8ec689ff7c73">&#9670;&nbsp;</a></span>FetchFrom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Directory::FetchFrom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_open_file.html">OpenFile</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the contents of the directory from disk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>is the file containing the directory contents </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa0072462a745ab1bc84e36a810ce7cc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0072462a745ab1bc84e36a810ce7cc5">&#9670;&nbsp;</a></span>Find()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Directory::Find </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Look up file name in directory, and return the disk sector number where the file's header is stored. Return -1 if the name isn't in the directory.</p>
<dl class="section return"><dt>Returns</dt><dd>the disk sector number where the file's header is stored or -1 if the name isn't in the directory.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the file name to look up </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abab8ff05c1dedadbaac7b44730eeb5a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abab8ff05c1dedadbaac7b44730eeb5a4">&#9670;&nbsp;</a></span>FindIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Directory::FindIndex </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Look up file name in directory.</p>
<dl class="section return"><dt>Returns</dt><dd>its location in the table of directory entries, -1 if the name isn't in the directory.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the file name to look up </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2525a4455b80a1ee2648319ab257037c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2525a4455b80a1ee2648319ab257037c">&#9670;&nbsp;</a></span>List()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Directory::List </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_list.html" title="Definition of a generic single-linked &quot;list&quot;. ">List</a> all the file names in the directory.(recursive function)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the Dir to print </td></tr>
    <tr><td class="paramname">depth</td><td>the depth in the recursion (to print a nice hierarchy with spaces) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a40c728221c5557e4fc181c4091c6fcff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40c728221c5557e4fc181c4091c6fcff">&#9670;&nbsp;</a></span>Print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Directory::Print </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_list.html" title="Definition of a generic single-linked &quot;list&quot;. ">List</a> all the file names in the directory, their <a class="el" href="class_file_header.html" title="Defines a file header in the Nachos file system. ">FileHeader</a> locations, and the contents of each file. For debugging. </p>

</div>
</div>
<a id="a38cd9f677e7110bab63fb943d118e3cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38cd9f677e7110bab63fb943d118e3cc">&#9670;&nbsp;</a></span>Remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Directory::Remove </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove a file name from the directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the file name to be removed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NO_ERROR, or INEXIST_DIRECTORY_ERROR </dd></dl>

</div>
</div>
<a id="abf5550df42587bbc604c71441a4d12fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf5550df42587bbc604c71441a4d12fc">&#9670;&nbsp;</a></span>WriteBack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Directory::WriteBack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_open_file.html">OpenFile</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write any modifications to the directory back to disk</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>is the file to contain the new directory contents </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a58597cdbf161409c3469527f2169894b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58597cdbf161409c3469527f2169894b">&#9670;&nbsp;</a></span>table</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_directory_entry.html">DirectoryEntry</a>* Directory::table</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Table of pairs: &lt;file name, file header location&gt; </p>

</div>
</div>
<a id="a3d30c557f3616574ff9eaeeb4163b82d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d30c557f3616574ff9eaeeb4163b82d">&#9670;&nbsp;</a></span>tableSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Directory::tableSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of directory entries. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>filesys/<a class="el" href="directory_8h_source.html">directory.h</a></li>
<li>filesys/<a class="el" href="directory_8cc.html">directory.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
