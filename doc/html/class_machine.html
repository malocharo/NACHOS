<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: Machine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_machine-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Machine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="machine_8h_source.html">machine.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Machine:</div>
<div class="dyncontent">
<div class="center"><img src="class_machine__coll__graph.png" border="0" usemap="#_machine_coll__map" alt="Collaboration graph"/></div>
<map name="_machine_coll__map" id="_machine_coll__map">
<area shape="rect" id="node2" href="class_m_m_u.html" title="Defines a MMU &#45; Memory Management Unit. " alt="" coords="178,601,281,728"/>
<area shape="rect" id="node3" href="class_translation_table.html" title="Defines the data structures used for address translation. " alt="" coords="160,260,312,467"/>
<area shape="rect" id="node4" href="class_page_table_entry.html" title="Defines an entry in a simple translation table. " alt="" coords="168,5,304,185"/>
<area shape="rect" id="node5" href="class_console.html" title="Defines a hardware console device. " alt="" coords="305,541,442,788"/>
<area shape="rect" id="node6" href="class_interrupt.html" title="Defines a low level interrupt hardware. " alt="" coords="18,541,147,788"/>
<area shape="rect" id="node7" href="class_list.html" title="Definition of a generic single&#45;linked &quot;list&quot;. " alt="" coords="5,247,136,480"/>
<area shape="rect" id="node8" href="class_a_c_i_a.html" title="Defines an ACIA (Asynchronous Communication Interface Adapter) device. An ACIA is an asynchronous dev..." alt="" coords="633,555,791,775"/>
<area shape="rect" id="node9" href="class_a_c_i_a__sysdep.html" title="This class is used to simulate an Asynchronous Communicating Interface Adapter on top of Unix sockets..." alt="" coords="683,929,813,1083"/>
<area shape="rect" id="node10" href="class_disk.html" title="Defines a physical disk I/O device. " alt="" coords="466,548,609,781"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad5958275a54dbc299b71ecdba7da0604"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ad5958275a54dbc299b71ecdba7da0604">Machine</a> (bool debug)</td></tr>
<tr class="separator:ad5958275a54dbc299b71ecdba7da0604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f595e09b54761f6c1e73b192067bd9c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a7f595e09b54761f6c1e73b192067bd9c">~Machine</a> ()</td></tr>
<tr class="separator:a7f595e09b54761f6c1e73b192067bd9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83444e06eb7a7c163a1b9c87a7062d43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a83444e06eb7a7c163a1b9c87a7062d43">Run</a> ()</td></tr>
<tr class="separator:a83444e06eb7a7c163a1b9c87a7062d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c9870f67219547a61d4d2e35516d06"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#aa9c9870f67219547a61d4d2e35516d06">ReadIntRegister</a> (int num)</td></tr>
<tr class="separator:aa9c9870f67219547a61d4d2e35516d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c99ef39db8a79eb9d31a462c86332ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a0c99ef39db8a79eb9d31a462c86332ff">WriteIntRegister</a> (int num, int32_t value)</td></tr>
<tr class="separator:a0c99ef39db8a79eb9d31a462c86332ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af16b6154387003b4d6a9ddfd6128284a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#af16b6154387003b4d6a9ddfd6128284a">ReadFPRegister</a> (int num)</td></tr>
<tr class="separator:af16b6154387003b4d6a9ddfd6128284a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac773aec703a24a025b6c0520c0fd5ac8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ac773aec703a24a025b6c0520c0fd5ac8">WriteFPRegister</a> (int num, int32_t value)</td></tr>
<tr class="separator:ac773aec703a24a025b6c0520c0fd5ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae12d7f0022eadcdadb37493ebab42b0b"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ae12d7f0022eadcdadb37493ebab42b0b">ReadCC</a> (void)</td></tr>
<tr class="separator:ae12d7f0022eadcdadb37493ebab42b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a710c8e7507cde9d8b5e087bb8eceebd1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a710c8e7507cde9d8b5e087bb8eceebd1">WriteCC</a> (int8_t <a class="el" href="class_machine.html#a267df298f7abd06598d3b09defa3eb2c">cc</a>)</td></tr>
<tr class="separator:a710c8e7507cde9d8b5e087bb8eceebd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a832bbd1f8e897619e8cb3ae01282ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="machine_8h.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a9a832bbd1f8e897619e8cb3ae01282ff">GetStatus</a> ()</td></tr>
<tr class="separator:a9a832bbd1f8e897619e8cb3ae01282ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c1948a2dadfd2ddb7d432b2443e884"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ad9c1948a2dadfd2ddb7d432b2443e884">SetStatus</a> (<a class="el" href="machine_8h.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a> st)</td></tr>
<tr class="separator:ad9c1948a2dadfd2ddb7d432b2443e884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70a015685c6e4bf705e4939551774aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ad70a015685c6e4bf705e4939551774aa">OneInstruction</a> (<a class="el" href="class_instruction.html">Instruction</a> *instr)</td></tr>
<tr class="separator:ad70a015685c6e4bf705e4939551774aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11fda0ddf1f16d8b1a06f75d1ab5b8a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a11fda0ddf1f16d8b1a06f75d1ab5b8a1">DelayedLoad</a> (int nextReg, int nextVal)</td></tr>
<tr class="separator:a11fda0ddf1f16d8b1a06f75d1ab5b8a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6f63790c0568437b100171f61fd77f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a0d6f63790c0568437b100171f61fd77f">RaiseException</a> (<a class="el" href="machine_8h.html#a0e0f0f1661d7aeb71ed9698bff6c6383">ExceptionType</a> which, int badVAddr)</td></tr>
<tr class="separator:a0d6f63790c0568437b100171f61fd77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08d36bd75e689830c73e307e1c7f7e28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a08d36bd75e689830c73e307e1c7f7e28">Debugger</a> ()</td></tr>
<tr class="separator:a08d36bd75e689830c73e307e1c7f7e28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e4dee4ed66da41de9bbebb161efd06f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a4e4dee4ed66da41de9bbebb161efd06f">DumpState</a> ()</td></tr>
<tr class="separator:a4e4dee4ed66da41de9bbebb161efd06f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae0da89b16ec8e098144ddb09ab9bf02c"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ae0da89b16ec8e098144ddb09ab9bf02c">int_registers</a> [<a class="el" href="machine_8h.html#a9b76404084d8d806c7df776d27d48dc7">NUM_INT_REGS</a>]</td></tr>
<tr class="separator:ae0da89b16ec8e098144ddb09ab9bf02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab911b70757712fc42f16e8b9c87a38b6"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ab911b70757712fc42f16e8b9c87a38b6">float_registers</a> [<a class="el" href="machine_8h.html#a3fae2fd34d21368d476a0a2c6abba2fb">NUM_FP_REGS</a>]</td></tr>
<tr class="separator:ab911b70757712fc42f16e8b9c87a38b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267df298f7abd06598d3b09defa3eb2c"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a267df298f7abd06598d3b09defa3eb2c">cc</a></td></tr>
<tr class="separator:a267df298f7abd06598d3b09defa3eb2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07cbf6544fe46ae72a7fc37e0db71993"><td class="memItemLeft" align="right" valign="top">int8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a07cbf6544fe46ae72a7fc37e0db71993">mainMemory</a></td></tr>
<tr class="separator:a07cbf6544fe46ae72a7fc37e0db71993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d27a9b68f4b10a801169190790177ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_m_u.html">MMU</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a7d27a9b68f4b10a801169190790177ea">mmu</a></td></tr>
<tr class="separator:a7d27a9b68f4b10a801169190790177ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa616ec44582a5910384ea1874bf9617f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_a_c_i_a.html">ACIA</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#aa616ec44582a5910384ea1874bf9617f">acia</a></td></tr>
<tr class="separator:aa616ec44582a5910384ea1874bf9617f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8290980871eb910ad13ace3a1b58108e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_interrupt.html">Interrupt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a8290980871eb910ad13ace3a1b58108e">interrupt</a></td></tr>
<tr class="separator:a8290980871eb910ad13ace3a1b58108e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ed56cd4020a618c3681347462a92fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_disk.html">Disk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a68ed56cd4020a618c3681347462a92fd">disk</a></td></tr>
<tr class="separator:a68ed56cd4020a618c3681347462a92fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9837c56d8d140ab4e30a1bf26003455a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_disk.html">Disk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a9837c56d8d140ab4e30a1bf26003455a">diskSwap</a></td></tr>
<tr class="separator:a9837c56d8d140ab4e30a1bf26003455a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a798eb7c6240b03be493aaeb262d28d77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_console.html">Console</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a798eb7c6240b03be493aaeb262d28d77">console</a></td></tr>
<tr class="separator:a798eb7c6240b03be493aaeb262d28d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae20b506ef97f97ce4997937bdfe57f76"><td class="memItemLeft" align="right" valign="top"><a class="el" href="machine_8h.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#ae20b506ef97f97ce4997937bdfe57f76">status</a></td></tr>
<tr class="separator:ae20b506ef97f97ce4997937bdfe57f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35987664b2f92fd54172966e3383d8be"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#a35987664b2f92fd54172966e3383d8be">singleStep</a></td></tr>
<tr class="separator:a35987664b2f92fd54172966e3383d8be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd19108d7b3e618eb061ebbae78fa8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="utility_8h.html#a404f45f62799218047ab2cfe96f408d5">Time</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_machine.html#aebd19108d7b3e618eb061ebbae78fa8b">runUntilTime</a></td></tr>
<tr class="separator:aebd19108d7b3e618eb061ebbae78fa8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the simulated execution hardware. </p>
<p>User programs shouldn't be able to tell that they are running on our simulator or on the real hardware, except</p><ul>
<li>we only partially support floating point instructions (only "ordered operations", no FP "likely branches", no fixed point words</li>
<li>the system call interface to Nachos is not the same as UNIX (10 system calls in Nachos vs. 200 in UNIX!) If we were to implement more of the UNIX system calls, we ought to be able to run Nachos on top of Nachos!</li>
</ul>
<p>The procedures in this class are defined in <a class="el" href="machine_8cc.html" title="Routines to simulate the execution of user programs. ">machine.cc</a>, <a class="el" href="mipssim_8cc.html" title="simulate a MIPS R2/3000 processor ">mipssim.cc</a>, and translate.cc. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad5958275a54dbc299b71ecdba7da0604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5958275a54dbc299b71ecdba7da0604">&#9670;&nbsp;</a></span>Machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Machine::Machine </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>debug</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>for running user programs </p>
<p>Constructor. Initialize the MIPS machine</p>
<p>Constructor. Initialize the MIPS machine.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">debug</td><td>if true, drop into the debugger after each user instruction is executed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7f595e09b54761f6c1e73b192067bd9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f595e09b54761f6c1e73b192067bd9c">&#9670;&nbsp;</a></span>~Machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Machine::~Machine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. De-allocate the data structures. </p>
<p>Destructor. De-allocate the data structures used by the. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a08d36bd75e689830c73e307e1c7f7e28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08d36bd75e689830c73e307e1c7f7e28">&#9670;&nbsp;</a></span>Debugger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::Debugger </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoke the user program debugger. </p>
<p>Primitive debugger. Note that we can't use gdb to debug user programs, since gdb doesn't run on top of Nachos.</p>
<p>This method just allow single-stepping, and printing the contents of memory. </p>

</div>
</div>
<a id="a11fda0ddf1f16d8b1a06f75d1ab5b8a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11fda0ddf1f16d8b1a06f75d1ab5b8a1">&#9670;&nbsp;</a></span>DelayedLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::DelayedLoad </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nextReg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nextValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a pending delayed load (modifying a reg) </p>
<p>Simulate effects of a delayed load.</p>
<p>NOTE &ndash; RaiseException/CheckInterrupts must also call DelayedLoad, since any delayed load must get applied before we trap to the kernel. </p>

</div>
</div>
<a id="a4e4dee4ed66da41de9bbebb161efd06f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e4dee4ed66da41de9bbebb161efd06f">&#9670;&nbsp;</a></span>DumpState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::DumpState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the user CPU and memory state. </p>
<p>Print the user program's CPU state. We might print the contents of memory, but that seemed like overkill. Floating point registers are not printed for the same reason. </p>

</div>
</div>
<a id="a9a832bbd1f8e897619e8cb3ae01282ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a832bbd1f8e897619e8cb3ae01282ff">&#9670;&nbsp;</a></span>GetStatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="machine_8h.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a> Machine::GetStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>idle, kernel, user </p>

</div>
</div>
<a id="ad70a015685c6e4bf705e4939551774aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad70a015685c6e4bf705e4939551774aa">&#9670;&nbsp;</a></span>OneInstruction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Machine::OneInstruction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_instruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>instr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the execution time of the instr (cycle) </p>
<p>Run one instruction of a user program.</p>
<p>Execute one instruction from a user-level program</p>
<p>If there is any kind of exception or interrupt, we invoke the exception handler, and when it returns, we return to <a class="el" href="class_machine.html#a83444e06eb7a7c163a1b9c87a7062d43" title="Run a user program. ">Run()</a>, which will re-invoke us in a loop. This allows us to re-start the instruction execution from the beginning, in case any of our state has changed. On a syscall, the OS software must increment the PC so execution begins at the instruction immediately after the syscall.</p>
<p>This routine is re-entrant, in that it can be called multiple times concurrently &ndash; one for each thread executing user code. We get re-entrancy by never caching any data &ndash; we always re-start the simulation from scratch each time we are called (or after trapping back to the Nachos kernel on an exception or interrupt), and we always store all data back to the machine registers and memory before leaving. This allows the Nachos kernel to control our behavior by controlling the contents of memory, the translation table, and the register set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instr</td><td><a class="el" href="class_instruction.html" title="Defines an instruction. ">Instruction</a> to be executed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Execution time of the instruction in cycles </dd></dl>

</div>
</div>
<a id="a0d6f63790c0568437b100171f61fd77f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d6f63790c0568437b100171f61fd77f">&#9670;&nbsp;</a></span>RaiseException()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::RaiseException </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="machine_8h.html#a0e0f0f1661d7aeb71ed9698bff6c6383">ExceptionType</a>&#160;</td>
          <td class="paramname"><em>which</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>badVAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Trap to the Nachos kernel, because of a system call or other exception.</p>
<p>Transfer control to the Nachos kernel from user mode, because the user program either invoked a system call, or some exception occurred (such as the address translation failed).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">which</td><td>the cause of the kernel trap (exception number) </td></tr>
    <tr><td class="paramname">badVaddr</td><td>the virtual address causing the trap, if appropriate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae12d7f0022eadcdadb37493ebab42b0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae12d7f0022eadcdadb37493ebab42b0b">&#9670;&nbsp;</a></span>ReadCC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t Machine::ReadCC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read floating point code condition register. </p>

</div>
</div>
<a id="af16b6154387003b4d6a9ddfd6128284a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af16b6154387003b4d6a9ddfd6128284a">&#9670;&nbsp;</a></span>ReadFPRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Machine::ReadFPRegister </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the contents of a floating point register. </p>

</div>
</div>
<a id="aa9c9870f67219547a61d4d2e35516d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c9870f67219547a61d4d2e35516d06">&#9670;&nbsp;</a></span>ReadIntRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Machine::ReadIntRegister </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the contents of an Integer CPU register. </p>
<p>Fetch or write the contents of CPU registers. </p>

</div>
</div>
<a id="a83444e06eb7a7c163a1b9c87a7062d43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83444e06eb7a7c163a1b9c87a7062d43">&#9670;&nbsp;</a></span>Run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a user program. </p>
<p>Make the MIPS machine start the execution of a user program. Called by the kernel when the program starts up; never returns.</p>
<p>This routine is re-entrant, in that it can be called multiple times concurrently &ndash; one for each thread executing user code. </p>

</div>
</div>
<a id="ad9c1948a2dadfd2ddb7d432b2443e884"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c1948a2dadfd2ddb7d432b2443e884">&#9670;&nbsp;</a></span>SetStatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::SetStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="machine_8h.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a>&#160;</td>
          <td class="paramname"><em>st</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a710c8e7507cde9d8b5e087bb8eceebd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a710c8e7507cde9d8b5e087bb8eceebd1">&#9670;&nbsp;</a></span>WriteCC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::WriteCC </td>
          <td>(</td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>cc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write floating point code condition register. </p>

</div>
</div>
<a id="ac773aec703a24a025b6c0520c0fd5ac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac773aec703a24a025b6c0520c0fd5ac8">&#9670;&nbsp;</a></span>WriteFPRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::WriteFPRegister </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>store a value into a floating point register </p>

</div>
</div>
<a id="a0c99ef39db8a79eb9d31a462c86332ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c99ef39db8a79eb9d31a462c86332ff">&#9670;&nbsp;</a></span>WriteIntRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::WriteIntRegister </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a value into an Integer CPU register. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa616ec44582a5910384ea1874bf9617f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa616ec44582a5910384ea1874bf9617f">&#9670;&nbsp;</a></span>acia</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_c_i_a.html">ACIA</a>* Machine::acia</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_a_c_i_a.html" title="Defines an ACIA (Asynchronous Communication Interface Adapter) device. An ACIA is an asynchronous dev...">ACIA</a> Hardware </p>

</div>
</div>
<a id="a267df298f7abd06598d3b09defa3eb2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a267df298f7abd06598d3b09defa3eb2c">&#9670;&nbsp;</a></span>cc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t Machine::cc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_condition.html" title="Defines the &quot;condition variable&quot; synchronization tool. ">Condition</a> code. Note that since only MIPS I FP instrs are implemented </p>

</div>
</div>
<a id="a798eb7c6240b03be493aaeb262d28d77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a798eb7c6240b03be493aaeb262d28d77">&#9670;&nbsp;</a></span>console</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_console.html">Console</a>* Machine::console</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_console.html" title="Defines a hardware console device. ">Console</a> </p>

</div>
</div>
<a id="a68ed56cd4020a618c3681347462a92fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68ed56cd4020a618c3681347462a92fd">&#9670;&nbsp;</a></span>disk</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_disk.html">Disk</a>* Machine::disk</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Raw disk device (hardware) </p>

</div>
</div>
<a id="a9837c56d8d140ab4e30a1bf26003455a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9837c56d8d140ab4e30a1bf26003455a">&#9670;&nbsp;</a></span>diskSwap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_disk.html">Disk</a>* Machine::diskSwap</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Swap raw disk device (hardware) </p>

</div>
</div>
<a id="ab911b70757712fc42f16e8b9c87a38b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab911b70757712fc42f16e8b9c87a38b6">&#9670;&nbsp;</a></span>float_registers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Machine::float_registers[<a class="el" href="machine_8h.html#a3fae2fd34d21368d476a0a2c6abba2fb">NUM_FP_REGS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Floating point general purpose registers. </p>

</div>
</div>
<a id="ae0da89b16ec8e098144ddb09ab9bf02c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0da89b16ec8e098144ddb09ab9bf02c">&#9670;&nbsp;</a></span>int_registers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Machine::int_registers[<a class="el" href="machine_8h.html#a9b76404084d8d806c7df776d27d48dc7">NUM_INT_REGS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CPU Integer registers, for executing user programs. </p>

</div>
</div>
<a id="a8290980871eb910ad13ace3a1b58108e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8290980871eb910ad13ace3a1b58108e">&#9670;&nbsp;</a></span>interrupt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_interrupt.html">Interrupt</a>* Machine::interrupt</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_interrupt.html" title="Defines a low level interrupt hardware. ">Interrupt</a> management </p>

</div>
</div>
<a id="a07cbf6544fe46ae72a7fc37e0db71993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07cbf6544fe46ae72a7fc37e0db71993">&#9670;&nbsp;</a></span>mainMemory</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t* Machine::mainMemory</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Physical memory to store user program, code and data, while executing </p>

</div>
</div>
<a id="a7d27a9b68f4b10a801169190790177ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d27a9b68f4b10a801169190790177ea">&#9670;&nbsp;</a></span>mmu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_m_u.html">MMU</a>* Machine::mmu</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="class_machine.html" title="Defines the simulated execution hardware. ">Machine</a> memory management unit </p>

</div>
</div>
<a id="aebd19108d7b3e618eb061ebbae78fa8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd19108d7b3e618eb061ebbae78fa8b">&#9670;&nbsp;</a></span>runUntilTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="utility_8h.html#a404f45f62799218047ab2cfe96f408d5">Time</a> Machine::runUntilTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Drop back into the debugger when simulated time reaches this value </p>

</div>
</div>
<a id="a35987664b2f92fd54172966e3383d8be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35987664b2f92fd54172966e3383d8be">&#9670;&nbsp;</a></span>singleStep</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Machine::singleStep</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Drop back into the debugger after each simulated instruction </p>

</div>
</div>
<a id="ae20b506ef97f97ce4997937bdfe57f76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae20b506ef97f97ce4997937bdfe57f76">&#9670;&nbsp;</a></span>status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="machine_8h.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a> Machine::status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>idle, kernel mode, user mode </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>machine/<a class="el" href="machine_8h_source.html">machine.h</a></li>
<li>machine/<a class="el" href="machine_8cc.html">machine.cc</a></li>
<li>machine/<a class="el" href="mipssim_8cc.html">mipssim.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
