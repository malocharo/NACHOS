<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: OpenFile Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_open_file-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">OpenFile Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="openfile_8h_source.html">openfile.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for OpenFile:</div>
<div class="dyncontent">
<div class="center"><img src="class_open_file__coll__graph.png" border="0" usemap="#_open_file_coll__map" alt="Collaboration graph"/></div>
<map name="_open_file_coll__map" id="_open_file_coll__map">
<area shape="rect" id="node2" href="class_file_header.html" title="Defines a file header in the Nachos file system. " alt="" coords="5,5,156,332"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a89136ac6b54013a413398f9496d39963"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a89136ac6b54013a413398f9496d39963">OpenFile</a> (int sector)</td></tr>
<tr class="separator:a89136ac6b54013a413398f9496d39963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d59e2d0a4e8eb5f21f31f7179dd6e50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a1d59e2d0a4e8eb5f21f31f7179dd6e50">~OpenFile</a> ()</td></tr>
<tr class="separator:a1d59e2d0a4e8eb5f21f31f7179dd6e50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f20ca65c80be4e6039a9f04cb03374"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a00f20ca65c80be4e6039a9f04cb03374">Seek</a> (int position)</td></tr>
<tr class="separator:a00f20ca65c80be4e6039a9f04cb03374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af87bf2b0b15fa3501dada45a1a284bf4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#af87bf2b0b15fa3501dada45a1a284bf4">Read</a> (char *into, int numBytes)</td></tr>
<tr class="separator:af87bf2b0b15fa3501dada45a1a284bf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2de8d2d805fef3510bfd2fdf46f683fa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a2de8d2d805fef3510bfd2fdf46f683fa">Write</a> (char *from, int numBytes)</td></tr>
<tr class="separator:a2de8d2d805fef3510bfd2fdf46f683fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0af8cd52ec71a2ad407039cebee2ef3d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a0af8cd52ec71a2ad407039cebee2ef3d">ReadAt</a> (char *into, int numBytes, int position)</td></tr>
<tr class="separator:a0af8cd52ec71a2ad407039cebee2ef3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4b5d26a169a7c22e6f27c1693adb1aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#ad4b5d26a169a7c22e6f27c1693adb1aa">WriteAt</a> (char *from, int numBytes, int position)</td></tr>
<tr class="separator:ad4b5d26a169a7c22e6f27c1693adb1aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d5618da2388829f294c3f33017fadac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a5d5618da2388829f294c3f33017fadac">Length</a> ()</td></tr>
<tr class="separator:a5d5618da2388829f294c3f33017fadac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c9c2e3e078fc71c99e0f589493fa28e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_file_header.html">FileHeader</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a2c9c2e3e078fc71c99e0f589493fa28e">GetFileHeader</a> ()</td></tr>
<tr class="separator:a2c9c2e3e078fc71c99e0f589493fa28e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99da585bad8c8e1916ca3eeaf78539b7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a99da585bad8c8e1916ca3eeaf78539b7">GetName</a> ()</td></tr>
<tr class="separator:a99da585bad8c8e1916ca3eeaf78539b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f2403097b272cec23712007d4a11b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a55f2403097b272cec23712007d4a11b5">SetName</a> (char *)</td></tr>
<tr class="separator:a55f2403097b272cec23712007d4a11b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa8600eb2b54645780d5a6208ad85762"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#aaa8600eb2b54645780d5a6208ad85762">IsDir</a> ()</td></tr>
<tr class="separator:aaa8600eb2b54645780d5a6208ad85762"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a7ee14d7e9d6ddb91f11e2de8d028c053"><td class="memItemLeft" align="right" valign="top"><a class="el" href="system_8h.html#a842c5e2e69277690b064bf363c017980">ObjectType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a7ee14d7e9d6ddb91f11e2de8d028c053">type</a></td></tr>
<tr class="separator:a7ee14d7e9d6ddb91f11e2de8d028c053"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a8df073bef217507f97f8fa923cdf5c57"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a8df073bef217507f97f8fa923cdf5c57">name</a></td></tr>
<tr class="separator:a8df073bef217507f97f8fa923cdf5c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aaa8d3ea50b339ebd9e9c4d9cc1ff9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_file_header.html">FileHeader</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a4aaa8d3ea50b339ebd9e9c4d9cc1ff9e">hdr</a></td></tr>
<tr class="separator:a4aaa8d3ea50b339ebd9e9c4d9cc1ff9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae73fc3708c50308938c44a9cc65ff8e2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#ae73fc3708c50308938c44a9cc65ff8e2">seekPosition</a></td></tr>
<tr class="separator:ae73fc3708c50308938c44a9cc65ff8e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63b6413c733e0fa22a339ecdf50c5a3a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_open_file.html#a63b6413c733e0fa22a339ecdf50c5a3a">fSector</a></td></tr>
<tr class="separator:a63b6413c733e0fa22a339ecdf50c5a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines the data structure maintained when a file is opened. </p>
<p>This is the "real" implementation, that turns these operations into read and write disk sector requests. In this baseline implementation of the file system, we don't worry about concurrent accesses to the file system by different threads &ndash; this is part of the assignment. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a89136ac6b54013a413398f9496d39963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89136ac6b54013a413398f9496d39963">&#9670;&nbsp;</a></span>OpenFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OpenFile::OpenFile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a file whose header is located at "sector" on the disk</p>
<p>Open a Nachos file for reading and writing. Bring the file header into memory while the file is open.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sector</td><td>the location on disk of the file header for this file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1d59e2d0a4e8eb5f21f31f7179dd6e50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d59e2d0a4e8eb5f21f31f7179dd6e50">&#9670;&nbsp;</a></span>~OpenFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OpenFile::~OpenFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the file. </p>
<p>Close a Nachos file, de-allocating any in-memory data structures. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2c9c2e3e078fc71c99e0f589493fa28e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c9c2e3e078fc71c99e0f589493fa28e">&#9670;&nbsp;</a></span>GetFileHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_file_header.html">FileHeader</a> * OpenFile::GetFileHeader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return the file's header </p>
<p>Return the file's <a class="el" href="class_file_header.html" title="Defines a file header in the Nachos file system. ">FileHeader</a>. </p>

</div>
</div>
<a id="a99da585bad8c8e1916ca3eeaf78539b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99da585bad8c8e1916ca3eeaf78539b7">&#9670;&nbsp;</a></span>GetName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * OpenFile::GetName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return the file's name </p>
<p>Return the name of the file. </p>

</div>
</div>
<a id="aaa8600eb2b54645780d5a6208ad85762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa8600eb2b54645780d5a6208ad85762">&#9670;&nbsp;</a></span>IsDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OpenFile::IsDir </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return true if the file is a directory </p>
<p>Return true if the file is a directory. </p>

</div>
</div>
<a id="a5d5618da2388829f294c3f33017fadac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d5618da2388829f294c3f33017fadac">&#9670;&nbsp;</a></span>Length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::Length </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of bytes in the file. </p>
<p>Return the number of bytes in the file (this interface is simpler than the UNIX idiom &ndash; lseek to end of file, tell, lseek back </p>

</div>
</div>
<a id="af87bf2b0b15fa3501dada45a1a284bf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af87bf2b0b15fa3501dada45a1a284bf4">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::Read </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>into</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read/write bytes from the file, starting at the implicit position. Return the # actually read/written, and increment position in file.</p>
<p>Read a portion of a file, starting from seekPosition. Return the number of bytes actually read, and as a side effect, increment the current position within the file.</p>
<p>Implemented using the more primitive ReadAt.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">into</td><td>the buffer to contain the data to be read from disk </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to transfer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0af8cd52ec71a2ad407039cebee2ef3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0af8cd52ec71a2ad407039cebee2ef3d">&#9670;&nbsp;</a></span>ReadAt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::ReadAt </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>into</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read/write bytes from the file, bypassing the implicit position.</p>
<p>Read a portion of a file, starting at "position". Return the number of bytes actually read, but has no side effects.</p>
<p>There is no guarantee the request starts or ends on an even disk sector boundary; however the disk only knows how to read a whole disk sector at a time. <br />
 We read in all of the full or partial sectors that are part of the request, but we only copy the part we are interested in.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">into</td><td>the buffer to contain the data to be read from disk </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to transfer </td></tr>
    <tr><td class="paramname">position</td><td>the offset within the file of the first byte to be read </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a00f20ca65c80be4e6039a9f04cb03374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f20ca65c80be4e6039a9f04cb03374">&#9670;&nbsp;</a></span>Seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OpenFile::Seek </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>position</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the position from which to start reading/writing &ndash; UNIX lseek</p>
<p>Change the current location within the open file &ndash; the point at which the next Read or Write will start from.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>the location within the file for the next Read/Write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a55f2403097b272cec23712007d4a11b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55f2403097b272cec23712007d4a11b5">&#9670;&nbsp;</a></span>SetName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OpenFile::SetName </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>newname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the file's name. </p>
<p>Set the name of the file. </p>

</div>
</div>
<a id="a2de8d2d805fef3510bfd2fdf46f683fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2de8d2d805fef3510bfd2fdf46f683fa">&#9670;&nbsp;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::Write </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>into</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a portion of a file, starting from seekPosition. Return the number of bytes actually written, and as a side effect, increment the current position within the file.</p>
<p>Implemented using the more primitive WriteAt.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">into</td><td>the buffer containing the data to be written to disk </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to transfer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad4b5d26a169a7c22e6f27c1693adb1aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4b5d26a169a7c22e6f27c1693adb1aa">&#9670;&nbsp;</a></span>WriteAt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::WriteAt </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a portion of a file, starting at "position". Return the number of bytes actually written, but has no side effects (except that Write modifies the file, of course).</p>
<p>There is no guarantee the request starts or ends on an even disk sector boundary; however the disk only knows how to write a whole disk sector at a time.</p>
<p>We must first read in any sectors that will be partially written, so that we don't overwrite the unmodified portion. We then copy in the data that will be modified, and write back all the full or partial sectors that are part of the request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from</td><td>the buffer containing the data to be written to disk </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to transfer </td></tr>
    <tr><td class="paramname">position</td><td>the offset within the file of the first byte to be written </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a63b6413c733e0fa22a339ecdf50c5a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63b6413c733e0fa22a339ecdf50c5a3a">&#9670;&nbsp;</a></span>fSector</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::fSector</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The file's first sector. </p>

</div>
</div>
<a id="a4aaa8d3ea50b339ebd9e9c4d9cc1ff9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aaa8d3ea50b339ebd9e9c4d9cc1ff9e">&#9670;&nbsp;</a></span>hdr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_file_header.html">FileHeader</a>* OpenFile::hdr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Header for this file. </p>

</div>
</div>
<a id="a8df073bef217507f97f8fa923cdf5c57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8df073bef217507f97f8fa923cdf5c57">&#9670;&nbsp;</a></span>name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* OpenFile::name</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the file's name. </p>

</div>
</div>
<a id="ae73fc3708c50308938c44a9cc65ff8e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae73fc3708c50308938c44a9cc65ff8e2">&#9670;&nbsp;</a></span>seekPosition</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int OpenFile::seekPosition</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current position within the file. </p>

</div>
</div>
<a id="a7ee14d7e9d6ddb91f11e2de8d028c053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ee14d7e9d6ddb91f11e2de8d028c053">&#9670;&nbsp;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="system_8h.html#a842c5e2e69277690b064bf363c017980">ObjectType</a> OpenFile::type</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Object type, for validity checks during system calls (must be the first public field) </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>filesys/<a class="el" href="openfile_8h_source.html">openfile.h</a></li>
<li>filesys/<a class="el" href="openfile_8cc.html">openfile.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
